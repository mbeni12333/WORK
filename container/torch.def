Bootstrap: docker
From: nvidia/cuda:11.4.1-cudnn8-runtime-ubuntu20.04

%post
	apt-get update
	apt-get -y install python3.8
	apt-get -y install python3-pip
	apt-get -y install python-is-python3
	apt-get -y install git unzip wget nano
	apt-get -y install openslide-tools
	apt-get -y install libvips
	apt-get -y install libcanberra-gtk-module
	apt-get -y install python3-openslide	

	pip3 install --upgrade pip
	pip3 install torch==1.9.0+cu111 torchvision==0.10.0+cu111 torchaudio==0.9.0 -f https://download.pytorch.org/whl/torch_stable.html
	pip3 install wsiprocess
	pip3 install openslide-python
	pip3 install numpy matplotlib pandas scipy scikit-learn
	pip3 install pytorch-lightning lightning-bolts
	pip3 install opencv-contrib-python-headless
	pip3 install plotly scikit-learn jupyterlab


%environment
	export XDG_RUNTIME_DIR=""